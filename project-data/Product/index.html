<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.8.1 from org.apache.maven.plugins:maven-project-info-reports-plugin:3.1.0:index at 2020-07-01 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <title>CS App Config Parent POM &#x2013; About</title>
    <style type="text/css" media="all">
      @import url("./basecss/maven-base.css");
      @import url("./basecss/maven-theme.css");
      @import url("./basecss/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
    <script>
      $(document).ready(() => {
        $.ajax({url: "data.json"}).done((res) => {
          $("#nav-title").text(res.title);
          window.navigationMenu = res.navigation;
          prepareMenu($(".dropdown-menu"), navigationMenu, 'Select Module');
          $('.dropdown-menu a.dropdown-toggle').on('click', function(e) {
            if (!$(this).next().hasClass('show')) {
              $(this).parents('.dropdown-menu').first().find('.show').removeClass('show');
            }
            var $subMenu = $(this).next('.dropdown-menu');
            $subMenu.toggleClass('show');


            $(this).parents('.show').on('hidden.bs.dropdown', function(e) {
              console.log('inside hidden dropdown');
              $('.dropdown-submenu .show').removeClass('show');
            });


            return false;
          });
          /*refreshSelectionLevels(0, navigationMenu);
          initialSelect(1, {children: navigationMenu})*/
        });
      });
      function prepareMenu(elementToAppend, childs, menuName) {
        if (menuName) {

          elementToAppend.append("<li class='dropdown-item disabled'><a class='disabled'>"+menuName+"</a></li>");
          elementToAppend.append('<li><div class="dropdown-divider"></div></li>')
        }
        childs.forEach(c => {
          const li = $("<li>");
          const anchorTag = $("<a>").attr('data-path', c.path);
          anchorTag.addClass("dropdown-item").append(
            $("<span>").text(c.title)
          )
          anchorTag.click(function(event) {
            $("#frame").attr('src', $(this).attr('data-path'));
          });
          li.append(anchorTag);
          if (c.children && c.children.length > 0) {
            li.addClass("dropdown-submenu");
            anchorTag.addClass('dropdown-toggle')
            .attr('role', 'button')
            .attr('data-toggle', 'dropdown')
            .attr('aria-haspopup', 'true');
            const subMenu = $("<ul>").addClass("dropright").addClass("dropdown-menu");
            let nextMenuName = '';
            if (menuName === 'Select Module') {
              nextMenuName = 'Select Branch';
            } else if (menuName === 'Select Branch') {
              nextMenuName = 'Select Build';
            }
            prepareMenu(subMenu, c.children, nextMenuName);
            li.append(subMenu);
          }
          elementToAppend.append(li);
        });
      }

      function initialSelect(level, childs) {
        const selectedTitleLevel1 = childs.children.find(n => n.active === true && n.level == level);
          if (selectedTitleLevel1) {
            $(".level-"+level).val(selectedTitleLevel1.title);
            $(".level-"+level).change();
            initialSelect(level+1, selectedTitleLevel1)
          }

      }
      function refreshSelectionLevels(level, childs) {
        level = +level;
        for (i=level+1;;i++) {
          if ($('.level-'+i).length !== 0) {
            /*$('.level-' + i + '-label').remove();
            $('.level-'+i).remove();*/
            $('.container-level-'+i).remove();
          } else {
            break;
          }
        }
        if (childs && childs.length > 0) {
          nextChildLevel = level + 1;
          const container = $("<div>").addClass("container-level-"+nextChildLevel).addClass("container-level")
          const label = $("<label>").addClass("level-"+nextChildLevel+"-label").text(getLabelForLevel(nextChildLevel));
          const selectOp  = $("<select>").addClass('level-'+nextChildLevel).addClass('form-control');
          selectOp.change(function(e) {
            const selectionLevel = $(this).attr('class').split(/\s+/).find(c => c.startsWith('level')).split("-")[1];
            const selection = findSelectionForLevel(selectionLevel);
            $("#frame").attr('src', selection.path);
            refreshSelectionLevels(selectionLevel, selection.children);
            refreshSelection();
          });
          container.append(label);
          container.append(selectOp.append("<option></option>"));
          childs.forEach((n) => {
            selectOp.append($("<option>").attr('value', n.title).text(n.title));
          });
          $(".navigation-menu").append(container);
        }
      }

      function getLabelForLevel(level) {
        switch(level) {
          case 1:
            return "Select Module";
          case 2:
            return "Select Branch";
          case 3:
            return "Select Build number";
        }
      }

      function findSelectionForLevel(level) {
        let selection = {children: navigationMenu};
        level = +level;
        for (let i=1;i<=level;i++) {
          if (selection) {
            const title = $('.level-'+i).val();
            selection = selection.children.find(n => n.title === title && n.level == i);
          } else {
            break;
          }
        }
        return selection;
      }
      function openNav() {
        document.getElementById("myNav").style.height = "450px";
        document.getElementById("myNav").style.background = "#402c5d";
      }

      function closeNav() {
        document.getElementById("myNav").style.height = "0px";
        document.getElementById("myNav").style.background = "#402c5d";
      }

      function refreshSelection() {
        $(".selected-levels").empty();
        for (i=1;;i++) {
          if ($('.level-'+i).length !== 0) {
            $(".selected-levels").append(
              $("<span>").addClass("selected-level").text($('.level-'+i).val())
            );
          } else {
            break;
          }
        }
      }
    </script>
  </head>
  <body class="composite">

    <div id="myNav" class="overlay">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <div class="overlay-content">
        <div class="navigation-menu">
          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Modules
            <span class="caret"></span>
          </button>
          <!--ul class="dropdown-menu dropright">

          </ul-->
        </div>
      </div>
    </div>
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #402b5e;height:60px;">
      <span style="font-size:24px;cursor:pointer;color:#fff;padding-left:0px" class="btn btn-default dropdown-toggle" data-toggle="dropdown">â˜°</span>
      <a class="navbar-brand" href="/" style="font-weight: bold;">Code Insights</a>
      <ul class="dropdown-menu dropright">

      </ul>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav" style="margin: auto;">
          <a class="nav-link" id="nav-title" href="#" style="font-size: 16px; color: #FFF;"></a>
          <span style="color: #fff;" class="selected-levels">
          </span>
        </ul>
        <span class="navbar-text" style="font-size:1rem;">
          <a class="nav-link" href="http://vpce-04dfcdc5bb6a01003-omwlpgbv.vpce-svc-04b17d08399fe0338.us-west-2.vpce.amazonaws.com:443" target="_blank">SonarQube</a>
        </span>
      </div>
    </nav>
    <div id="bodyColumn">
      <iframe id="frame" src="home.html" style="width: 100%; height: 100%;"></iframe>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2020.All rights reserved.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
